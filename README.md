# 猜歌遊戲
## 流程
開始 -> 選擇範圍(某歌手/語種?) -> 播歌 -> 開始猜歌 -> 機器辨識答案 -> 晉級 -> 排名積分 -> 結束

## 使用說明
1. 將bot拉入群組讓大家進行遊戲
2. pi 接音響播音樂
- [ ] **處理音源，傳到bot進行遊戲**

## 功能
- [ ] 音樂播放(抓歌曲)  : 設定範圍(某歌手/語種) 僅撥放前x秒
  - x要固定還是隨機阿 
  - youtube連結直接播放
  
- [ ] 辨識歌名(拿掉垃圾訊息) 比對歌名
  - 語音 / 打字並存 

- [ ] 計分、排名: 最先猜到即可獲得積分，最後以排行榜紀錄玩家的分數

- [ ] 關卡 : 一開始的關卡較為簡單(EX:播放30秒)，若猜對答案即可晉級，接下來的關卡則漸進式變難(EX:縮短秒數、變換速度...)
  - 總共5關
  - 一關3-5題，一題3分，用提示則一分
  - 若用提示還是無法猜出，則跳過並得0分 
  - 一關結束公布一次總排名
  - 一個人猜隊之後則結束該題，並顯示答對者

- [ ] 基本控制: 加入、開始、離開、跳過/公布解答、提示
  -  開始: 第一個加入的人當此場的房主，並由房主輸入範圍(中文歌/(英文歌?)/歌手名/歌手s)並開始遊戲
```/start 中文歌```
  -  加入: 大家加入遊戲
  -  離開: 個人決定退出遊戲
  -  跳過: 使用提示後，無人猜出，此題跳過，並公布答案
  -  列出排名
  -  結束: 
  -  提示: 所有人達過一輪沒人答對，決定開啟提示mode人數大於遊戲人數/2，開啟提示模式，提供歌名字數提示 / 歌手提示
:::info
/join -> /start -> /music -> 其他功能
> 要先join加入遊戲，並等待大家加入完畢之後才開始遊戲，並使用其他功能

```/start``` 遊戲規則 V
```/join``` 加入遊戲 V
```/music 歌手``` 遊戲範圍 V(沒有==全部中文歌==)
```/replay``` 重複撥放歌曲 V
```/exit``` 離開遊戲 V
```/pass``` 跳過此歌曲 V
```/prompt``` 提示 V
```/rank```列出排名 V
  ==關卡==
:::


  

## BT's Advice
1. 善用AWS裡面的東西 EX : Speech to Text
> 反正錢很多用不完[name=BT]
> 我上次的那個現在很快了(我猜上次是因為網路不好的問題)[name=丙]
2. 可以把漢偉的`Moli_PA`擴充功能做 2.0，然後再加上遊戲
3. 不一定要接音響，也可以用串流平台

## 
- 想辦法抓到telegram的音訊檔，使能進行比對
- 關卡()
- 提示


- 排名

## 未來展望
- 依照不同類型分關卡

## 參考資料
- https://hackmd.io/@truckski/HkgaMUc24?type=view
- https://blog.sean.taipei/2017/05/telegram-bot
- https://letswrite.tw/telegram-bot-commands/
- https://oscarada87.github.io/2019/05/25/%E7%94%A8-Python-%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84-Telegram-Bot/

:::warning
### 討論
- 離開這功能還要嘛?
  - 要吧~大家一起退出即離開遊戲 
- 列出排名要列出幾個?
  -  前3名
- 關卡數要不要少一點?
  - 5 關 1關3題  
 
|關卡| 1| 2| 3| 4|5|
| -------- | -------- | -------- |--------|---------|-------|
| 關卡的秒數 | 60 | 30 |   20 |  10 | 5|
| 關卡的計分方式  | 5 | 10 |  15|   20|  25|
| 使用提示後的得分 |  3 |  6 |  9| 12 |15| 
- 歌播完但沒人猜出來的後續處理 -> 重播
  - 重播+扣分/家秒數重播+扣分/直接開啟提示模式 
:::

## 新發現
- if很久沒播音樂，可以建議使用者在下一次/music 團名指令，關數根分數不會影響

## 留言板
- 有更新抓出一點蟲完的版本到[我的github](https://github.com/smilelucy/LSA)
> 丙(2021/01/03 01:43 AM)
